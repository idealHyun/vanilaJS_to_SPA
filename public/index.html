<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Document</title>
</head>

<body>
    <div id="app"></div>
    <script>
        class Component {
            $target
            state

            constructor($target) {
                this.$target = $target
                this.setup()
                this.render()
            }

            // 초기 상태 세팅
            setup() { }

            // state를 통해 태그 레이아웃 만들기
            template() { return ''; }

            // 태그에 이벤트 달기
            setEvent() { }

            // 레이아웃 만들고 이벤트 달기
            render() {
                this.$target.innerHTML = this.template();
                this.setEvent();
            }

            // 상태 업데이트
            setState(newState) {
                this.state = { ...this.state, ...newState }
                this.render()
            }
        }

        class App extends Component {
            setup() {
                this.state = {
                    items: ['1', '2', '3']
                }
            }
            template() {
                const { items } = this.state;
                return `
                    <ul>
                    ${items.map(item => `<li>${item}</li>`).join('')}
                    </ul>
                    <button id='append'>추가</button>
                `
            }

            setEvent() {
                this.$target.querySelector('#append').addEventListener('click', () => {
                    const { items } = this.state;
                    this.setState({ items: [...items, `${items.length + 1}`] });
                });
            }
        }

        new App(document.querySelector('#app'))
    </script>
</body>

</html>